(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(21)},19:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),o=n(11),i=n.n(o),s=(n(19),n(0)),u=n(3),h=n(4),l=n(1),c=n(5),d=n(8),p=n(13),m=n(2),g=n(12),f=function(e){return r.a.createElement("div",{id:"controls"},r.a.createElement("div",{id:"grayscale-toggle",className:"control-item"},r.a.createElement("p",null,"Grayscale:"),r.a.createElement("input",{type:"checkbox",onChange:e.toggleGrayscale})),r.a.createElement("div",{id:"map-size-toggle",className:"control-item"},r.a.createElement("p",null,"Map size:"),r.a.createElement("input",{type:"range",min:"7",max:"9",value:e.n,onChange:function(t){return e.setN(t.target.value)}})),r.a.createElement("div",{id:"roughness-toggle",className:"control-item"},r.a.createElement("p",null,"Roughness:"),r.a.createElement("input",{type:"range",min:".1",max:".7",value:e.roughness,step:".1",onChange:function(t){return e.setRoughness(t.target.value)}})),r.a.createElement("button",{id:"generate-button",className:"control-item",disabled:e.isLoading,onClick:e.generateTerrain},"Generate Terrain"))},v=function(e){return r.a.createElement("div",{className:"loading-block loading-block-".concat(e.isLoading)},r.a.createElement("div",{id:"loading-image"},r.a.createElement("h1",null,"Loading...")))},w=new m.i(16777215,.8,0,2);w.position.set(300,100,0),w.castShadow=!0;var M=new m.a(15658734),z=new m.k;z.add(w),z.add(M);var E=new m.q({antialias:!0});function b(e){var t=Object(a.useRef)(null),n=new m.g(14,t.clientWidth/t.clientHeight,.1,9e3);n.position.set(400,-100,740),n.up.set(1,0,0),n.lookAt(0,0,0);var o=Object(a.useState)(!1),i=Object(d.a)(o,2),s=i[0],u=i[1],h=Object(a.useState)(!0),l=Object(d.a)(h,2),c=l[0],w=l[1],M=Object(a.useState)(!1),b=Object(d.a)(M,2),j=b[0],O=b[1],y=function(){E.render(z,n),O(!1)},S=function(){n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),E.setSize(t.current.clientWidth,t.current.clientHeight),y()},k=function(){j||(O(!0),setTimeout(function(){z.children[2]&&(z.children[2].geometry.dispose(),z.children[2].material.dispose(),z.remove(z.children[2])),e.diamondSquare();var t=function(){if(0!==e.points.length){for(var t=new m.h(Math.pow(2,e.n)+1,Math.pow(2,e.n)+1,Math.pow(2,e.n),Math.pow(2,e.n)),n=[],a=0;a<e.points.length;a++)n.push.apply(n,Object(p.a)(e.points[a]));for(var r,o=0,i=[],u=0;u<t.attributes.position.array.length;u+=3)t.attributes.position.array[u+2]=n[o].z,n[o].z>=74.5?(i.push((176+Math.round(15*Math.random()))/255),i.push((174+Math.round(15*Math.random()))/255),i.push((174+Math.round(15*Math.random()))/255)):n[o].z>=46?(i.push(Math.round(109+2.5*(n[o].z-48)+20*Math.random())/255),i.push(Math.round(105+2.5*(n[o].z-48)+20*Math.random())/255),i.push(Math.round(105+2.5*(n[o].z-48)+20*Math.random())/255)):n[o].z>4?(i.push(Math.round(30+1.85*n[o].z)/255),i.push((Math.round(60+.9*n[o].z)+Math.round(20*Math.random()))/255),i.push(Math.round(30+1.7*n[o].z)/255)):n[o].z>0?(i.push(Math.round(90-14*n[o].z+10*Math.random())/255),i.push(Math.round(120-14*n[o].z+20*Math.random())/255),i.push(Math.round(90-14*n[o].z+10*Math.random())/255)):n[o].z>-2?(i.push(Math.round(180+20*Math.random())/255),i.push(Math.round(180+20*Math.random())/255),i.push(Math.round(130+20*Math.random())/255)):n[o].z>-22?(i.push(Math.round(70+2.5*(n[o].z+1.2))/255),i.push(Math.round(70+2.5*(n[o].z+1.2))/255),i.push(Math.round(90+2.5*(n[o].z+1.2))/255)):(i.push(18/255),i.push(18/255),i.push(38/255)),o+=1;return t.setAttribute("color",new m.c(i,3)),r=s?new m.f({color:"gray",flatShading:!0,dithering:!0,precision:"lowp"}):new m.f({vertexColors:m.p,flatShading:!0,shininess:1,dithering:!0,precision:"lowp"}),new m.e(t,r)}}();t.castShadow=!0,t.position.set(0,0,0),z.add(t),t.rotation.y=Math.PI/2,S()},0))};return Object(a.useEffect)(function(){E.setSize(t.current.clientWidth,t.current.clientHeight),window.addEventListener("resize",S),t.current.appendChild(E.domElement),E.domElement.addEventListener("click",function(){return w(!1)}),E.domElement.addEventListener("touch",function(){return w(!1)});var e=new g.a(n,E.domElement);e.maxPolarAngle=1.5,e.minDistance=100,e.maxDistance=2100,e.rotateSpeed=.25,window.requestAnimationFrame(function t(){e.update(),window.requestAnimationFrame(t),E.render(z,n)}),k()},[]),r.a.createElement("div",{id:"generator"},r.a.createElement("div",{id:"canvas",ref:t},r.a.createElement("div",{className:"rotate-message-".concat(c)},r.a.createElement("h3",null,"Click and drag to rotate, pinch or mousewheel to zoom")),r.a.createElement(v,{isLoading:j})),r.a.createElement(f,{grayscale:s,n:e.n,setN:e.setN,roughness:e.roughness,setRoughness:e.setRoughness,toggleGrayscale:function(){u(!s),z.children[2]&&(z.children[2].material=s?new m.f({vertexColors:m.p,color:"white",flatShading:!0,shininess:1,precision:"lowp"}):new m.f({color:"gray",flatShading:!0,shininess:1,precision:"lowp"})),y()},generateTerrain:k,isLoading:j}))}function j(){var e=Object(a.useState)(8),t=Object(d.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(.6),s=Object(d.a)(i,2),u=s[0],h=s[1],l=Object(a.useState)([]),c=Object(d.a)(l,2),p=c[0],m=c[1],g=function(e,t,n,a){e=e.filter(function(e){return null!==e.z});for(var r,o=0,i=0;i<e.length;i++)o+=e[i].z;o/=e.length,r=Math.random()*a*u*.7,1===n&&(r*=.8),Math.random()<.5?o-=r:o+=r,t.z=o},f=function(){var e=[0,0,0,0];e.forEach(function(t,a){var r=Math.random()*n*2;Math.random()<.5?e[a]-=r:e[a]+=r});for(var t=function(e,t,a,r){for(var o=[],i=0;i<Math.pow(2,n)+1;i++){for(var s=[],u=0;u<Math.pow(2,n)+1;u++)s.push({z:null});o.push(s)}return o[0][0].z=e,o[o.length-1][0].z=t,o[o.length-1][o.length-1].z=a,o[0][o.length-1].z=r,o}.apply(void 0,e),a=1,r=t.length-1;a<2*n+1;){if(a%2!==0)for(var o=0;o<t.length;o+=r)for(var i=0;i<t[o].length&&!(i+r>=t[o].length||o+r>=t.length);i+=r){var s=[];s.push(t[o][i]),s.push(t[o][i+r]),s.push(t[o+r][i]),s.push(t[o+r][i+r]),g(s,t[Math.round(o+r/2)][Math.round(i+r/2)],a,r)}else for(var u=0;u<t.length;u+=r)for(var h=0;h<t[u].length;h+=r){var l=[];null===t[u][h].z&&(u-r>=0&&l.push(t[u-r][h]),h+r<t.length&&l.push(t[u][h+r]),u+r<t.length&&l.push(t[u+r][h]),h-r>=0&&l.push(t[u][h-r]),g(l,t[u][h],a,r))}a%2!==0&&(r/=2),r<1&&(r=1),a++}m(function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++){var a=v(e,t,n),r=a.reduce(function(e,t){return t+e})/a.length;e[t][n].z=r}return e}(t))},v=function(e,t,n){for(var a=[],r=t-1;r<=t+1;r++)if(!(r<0)){if(r>e.length-1)break;for(var o=n-1;o<=n+1;o++)o<0||r===t&&o===n||o>e.length-1||a.push(e[r][Math.round(o)].z)}return a};return Object(a.useEffect)(function(){f()},[n,u]),p.length>0?r.a.createElement(b,{n:n,roughness:u,points:p,diamondSquare:f,setN:o,setRoughness:h}):null}E.setClearColor("rgb(50, 50, 50)");var O=function(e){function t(){return Object(s.a)(this,t),Object(h.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(j,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.3fcab8eb.chunk.js.map